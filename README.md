## Rust CEF bindings

Rust language bindings and minimal wrapper around the CEF C API. The goal of this library is to enable use of CEF without directly using unsafe or extern code.

### Repository Layout
`cef-sys` is a `rust-bindgen`-generated crate. It is pretty minimal templated code from the basic recommended `bindgen` structure.

`tools` contains the code generation tool, based heavily on and using the `cef_parser.py` and related CEF tooling. It generates Rust wrapper code from the output of the CEF C++ parser, similar to the `make_capi_header.py` tool in the CEF repository. It has also been extended to parse basic `struct` and `enum` definitions in `include/base/cef_types`.

`cef` contains the Rust wrappers, most of which is generated by `tools/make_rust_wrapper.py`. The base CEF wrappers are implemented here, such as refcounting and string types.

`cef-test` contains a sample of how the `cef` crate can be used.

### Build Instructions:

- Download a binary distribuion from the [CEF build site](http://opensource.spotify.com/cefbuilds/index.html)
- Unpack the archive into a folder at the root of this repository
- Set the `CEF_PATH` environment variable to the path of that directory
- Run `python tools/make_rust_wrapper.py --output-dir autogen`. This will create a folder `autogen` that contains the generated wrapper code
- Copy the contents of the `autogen/include` folder into `cef/src/include`
- Create a temporary build directory in the root of this repository
- Copy the contents of `$CEF_PATH/Release` and `$CEF_PATH/Resources` into the build directory
- From within the build directory, run `cargo run --manifest-path=../cef-test/Cargo.toml`

The auto-generated code in this repository is based on the release `cef_binary_85.3.1+g1306235+chromium-85.0.4183.83_windows64`

`windows64` is the only target currently supported.

[CEF Repository](https://bitbucket.org/chromiumembedded/cef)

